%% Comprotamiento de Auto Clave 
%% Proceso # 1, Controlando al 60% del ciclo util, dejando al control libre
%% a los 118°C
clc,clear

Tmaquina =    [21.7 22.6 23.9 25.7 27.5 29.7 31.4 33.8 36.4 38.5  41.3  45.1  49.3  53.1  56.7  60.4  63.3  65.9...
               68.5  71.1  73.5  75.7  77.9  80.0  82.0  83.8  85.8  87.7  89.2  91.0  92.6  94.3  95.9  97.2 ...
               99.1  100.8 102.0 103.1 103.9 104.8 105.6 106.5 107.2 108.1 109.0 109.8 110.5 111.4 112.2 113.5 ...
               114.4 115.2 116.0 116.9 117.9 118.8 120.0 120.8 121.2 121.2 121.1 121.0 120.7 121.5 120.5 120.5 ...
               120.1 118.8 118.3 119.4 119.7 119.8 119.7 119.6 119.5];

TcontrolPt =  [32.5 37.0 42.7 47.7 49.4 52.1 54.3 56.5 59.3 50.9  58.7  60.4  63.6  67.2  70.0  72.8  75.3  77.6...
               79.7  82.0  84.1  86.4  88.1  90.1  91.8  93.9  96.0  98.3  101.0 104.0 109.0 112.2 115.4 117.7 ...
               119.6 122.0 125.3 128.6 132.1 136.7 140.2 143.5 146.6 149.6 151.7 154.4 158.0 160.6 163.1 164.4 ...
               166.7 170.8 173.9 175.0 176.9 180.6 184.7 188.2 188.5 188.0 186.6 184.8 182.4 180.4 179.2 177.9 ...
               176.8 175.2 173.2 171.5 170.2 169.0 167.9 166.7 165.6];
 
TcontrolYca = [58.0 67.0 72.0 82.0 86.0 89.0 92.0 96.0 99.0 102.0 106.0 110.0 117.0 118.0 119.0 120.0 121.0 122.0...
               125.0 126.0 131.0 133.0 135.0 137.0 137.0 140.0 146.0 146.0 148.0 153.0 154.0 156.0 160.0 163.0 ...
               162.0 164.0 167.0 167.0 167.0 172.0 175.0 177.0 178.0 181.0 176.0 180.0 181.0 183.0 185.0 188.0 ...
               190.0 190.0 195.0 193.0 197.0 205.0 204.0 206.0 196.0 192.0 184.0 181.0 178.0 176.0 174.0 174.0 ...
               170.0 167.0 165.0 163.0 160.0 159.0 159.0 157.0 157.0];

tiempo = (1:length(Tmaquina));           
for(i=1:length(Tmaquina))
    Set_point(i) = 121;
end
Presion =     [0    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     0     0    ...
               0     0     0     0     0     1      2     3    3.5   4     4.5   5.5   6     7     7.5   8.5   ...
               9.5   10.0  11.0  11.0  11.5  12.0  12.5  13.0  13.5  14.0  14.5  15.0  15.5  16.0  16.0  16.5 ...
               17.5  18.0  18.5  19.0  19.5  21.0  21.5  21.5  22.0  22.0  22.0  22.0  22.0  22.0  22.0  22.0 ...
               18.0  12.0  8.0   5.0   3.0   0.5   0     0     0];
subplot(2,1,1)
plot(tiempo,Tmaquina,'xr',tiempo,TcontrolPt,'-xb',tiempo,TcontrolYca,'-xk',tiempo,Set_point,'k');
legend('Temperatura de la maquina','Temperatura de control con PT100','Temperatura de control con Termocupla')
title('Temperatura medida');xlabel('Tiempo (minutos)');ylabel('Temperatura (°C) ')
grid
subplot(2,1,2)
plot(tiempo,Presion,'-sg'),title('Presión de la Auto Clave');xlabel('Tiempo (minutos)');ylabel('Presión (PSI) ')
grid

%% Proceso # 2, dejando al control libre a los 118°C
%% Cuando se activa la trampa se disminuye la temperatura de Pt100
clc,clear

Tmaquina =    [21.6 21.7 22.2 23.3 24.9 27.4 29.8 33.0 36.6 39.7 44.0 49.1 54.9 62.5 66.6 70.1 72.5 74.9 77.2  79.1...
               82.1  83.5  84.5  84.6  84.8  85.1  85.5  85.6  85.9  86.4  87.1  87.9  89.3  90.4  91.8  90.3 ...
               95.4  97.2  98.5  100.2 101.9 103.7 105.6 108.2 110.7 111.4 114.4 ];

TcontrolPt =  [22.3 22.5 23.7 27.2 33.0 40.3 46.9 54.1 60.9 67.6 74.8 78.0 74.9 73.9 74.6 76.0 81.5 89.7 104.2 120.0...
               135.0 148.5 156.0 157.9 157.8 156.7 155.0 153.1 151.2 150.0 151.9 157.1 166.9 177.2 190.3 205.6 ...
               218.9 234.7 246.5 259.9 274.4 287.8 0.0   0.0   0.0   0.0   0.0   ];
 
TcontrolYca = [47   161  278  349  304  304  347  379  395  405  416  420  423  433  434  438  440  439  443   452 ...
               434   387   339   314   297   278   261   252   259   313   374   415   450   466   477   489 ...
               520   534   540   541   551   552   553   560   567   561   571   ];

Presion =     [0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0.1  1     1.5...
               3     2.5   2.5   2.5   2     2     2     1     1     1     2     2.5    3    4     5     5 ...
               6     6.5   7     8     8.5   9.5   10.5  11.5  12.5  13.5  14.5  ];

tiempo = (1:length(Tmaquina));           
for(i=1:length(Tmaquina))
    Set_point(i) = 121;
end
subplot(2,1,1)
plot(tiempo,Tmaquina,'-xr',tiempo,TcontrolPt,'-xb',tiempo,TcontrolYca,'-xk',tiempo,Set_point,'k');
legend('Temperatura de la maquina','Temperatura de control con PT100','Temperatura de control con Termocupla')
title('Temperatura medida');xlabel('Tiempo (minutos)');ylabel('Temperatura (°C) ')
grid
subplot(2,1,2)
plot(tiempo,Presion,'-sg'),title('Presión de la Auto Clave');xlabel('Tiempo (minutos)');ylabel('Presión (PSI) ')
grid
